<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎯 ProRecruitment - צפיה במידע</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            direction: rtl;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .button-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }
        
        .btn.active {
            background: linear-gradient(45deg, #28a745, #20c997);
        }
        
        .content-area {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 400px;
        }
        
        .data-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border-right: 5px solid #667eea;
        }
        
        .data-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 25px rgba(0,0,0,0.15);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .card-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .card-badge {
            background: #28a745;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }
        
        .card-badge.inactive {
            background: #dc3545;
        }
        
        .card-badge.review {
            background: #ffc107;
            color: #000;
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .data-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 12px;
            border-radius: 8px;
            border-right: 3px solid #667eea;
        }
        
        .data-label {
            font-weight: bold;
            color: #555;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        .data-value {
            color: #333;
            font-size: 1.1em;
        }
        
        .rating {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .stars {
            color: #ffc107;
            font-size: 1.2em;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #667eea;
        }
        
        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .file-upload {
            background: #e9ecef;
            border: 2px dashed #adb5bd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .file-upload:hover {
            background: #dee2e6;
            border-color: #6c757d;
        }
        
        .hidden {
            display: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header fade-in">
            <h1>🎯 ProRecruitment System</h1>
            <p>צפיה במידע המערכת המקצועית</p>
        </div>

        <div class="controls fade-in">
            <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="loadJSONFile(event)">
                <p>📁 לחץ כאן להעלאת קובץ JSON או גרור קובץ לכאן</p>
                <small>העלה קובץ JSON מתיקיית database כדי לראות את המידע</small>
            </div>
            
            <div class="button-grid">
                <button class="btn" onclick="loadDemoData('users')">👥 משתמשים</button>
                <button class="btn" onclick="loadDemoData('candidates')">👤 מועמדים</button>
                <button class="btn" onclick="loadDemoData('vendors')">🏭 ספקים</button>
                <button class="btn" onclick="loadDemoData('clients')">🏢 לקוחות</button>
                <button class="btn" onclick="loadDemoData('tasks')">📝 משימות</button>
                <button class="btn" onclick="loadDemoData('orders')">📋 הזמנות</button>
            </div>
        </div>

        <div class="content-area fade-in">
            <div id="mainContent">
                <div class="loading">
                    🔄 בחר סוג נתונים לצפייה או העלה קובץ JSON
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentData = null;
        
        function loadJSONFile(event) {
            const file = event.target.files[0];
            if (file && file.type === 'application/json') {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        currentData = data;
                        displayData(data);
                        showSuccess('✅ הקובץ נטען בהצלחה!');
                    } catch (error) {
                        showError('❌ שגיאה בטעינת הקובץ: ' + error.message);
                    }
                };
                reader.readAsText(file, 'UTF-8');
            } else {
                showError('⚠️ אנא בחר קובץ JSON בלבד');
            }
        }
        
        function loadDemoData(type) {
            // Update active button
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            showError('📂 לטעינת נתונים אמיתיים, העלה את הקובץ המתאים מתיקיית database');
        }
        
        function displayData(data) {
            const content = document.getElementById('mainContent');
            
            if (data.users) {
                displayUsers(data.users);
            } else if (data.candidates) {
                displayCandidates(data.candidates);
            } else if (data.vendors) {
                displayVendors(data.vendors);
            } else if (data.clients) {
                displayClients(data.clients);
            } else if (data.tasks) {
                displayTasks(data.tasks);
            } else if (data.orders) {
                displayOrders(data.orders);
            } else {
                content.innerHTML = '<div class="error">❌ סוג נתונים לא מזוהה</div>';
            }
        }
        
        function displayUsers(users) {
            const content = document.getElementById('mainContent');
            const usersList = Array.isArray(users) ? users : users.users || [];
            
            const html = `
                <h2>👥 משתמשי המערכת (${usersList.length})</h2>
                ${usersList.map(user => `
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">${user.personal_info?.full_name || user.שם_מלא || 'לא צוין'}</div>
                            <div class="card-badge ${user.account_info?.status === 'ACTIVE' ? '' : 'inactive'}">
                                ${user.account_info?.status || user.סטטוס || 'לא ידוע'}
                            </div>
                        </div>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">📧 אימייל</div>
                                <div class="data-value">${user.personal_info?.email || user.אימייל || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📞 טלפון</div>
                                <div class="data-value">${user.personal_info?.phone || user.טלפון || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💼 תפקיד</div>
                                <div class="data-value">${user.account_info?.role || user.תפקיד || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🏢 מחלקה</div>
                                <div class="data-value">${user.account_info?.department || user.מחלקה || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🔐 אימות דו-שלבי</div>
                                <div class="data-value">${user.account_info?.two_factor_enabled ? '✅ פעיל' : '❌ לא פעיל'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🕐 כניסה אחרונה</div>
                                <div class="data-value">${user.account_info?.last_login || user.כניסה_אחרונה || 'לא ידוע'}</div>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
            
            content.innerHTML = html;
        }
        
        function displayVendors(vendors) {
            const content = document.getElementById('mainContent');
            const vendorsList = Array.isArray(vendors) ? vendors : vendors.vendors || [];
            
            const html = `
                <h2>🏭 ספקי המערכת (${vendorsList.length})</h2>
                ${vendorsList.map(vendor => `
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">${vendor.company_info?.company_name || vendor.שם_הספק || 'לא צוין'}</div>
                            <div class="card-badge ${vendor.status === 'ACTIVE' ? '' : vendor.status === 'UNDER_REVIEW' ? 'review' : 'inactive'}">
                                ${vendor.status === 'ACTIVE' ? 'פעיל' : vendor.status === 'UNDER_REVIEW' ? 'בבדיקה' : 'לא פעיל'}
                            </div>
                        </div>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">👤 איש קשר</div>
                                <div class="data-value">${vendor.contact_info?.primary_contact?.name || vendor.איש_קשר || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📧 אימייל</div>
                                <div class="data-value">${vendor.contact_info?.primary_contact?.email || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📞 טלפון</div>
                                <div class="data-value">${vendor.contact_info?.primary_contact?.phone || vendor.טלפון || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💰 אחוז עמלה</div>
                                <div class="data-value">${vendor.business_terms?.commission_rate || 'לא צוין'}%</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">⭐ דירוג</div>
                                <div class="data-value rating">
                                    <span class="stars">${'★'.repeat(Math.round(vendor.performance?.rating || 0))}</span>
                                    <span>${vendor.performance?.rating || 'לא דורג'}</span>
                                </div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📈 שיעור הצלחה</div>
                                <div class="data-value">${vendor.performance?.success_rate || 'לא ידוע'}%</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💵 סך הכנסות</div>
                                <div class="data-value">₪${vendor.financial_info?.total_revenue_generated?.toLocaleString() || '0'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🔧 התמחויות</div>
                                <div class="data-value">${vendor.specializations?.primary_fields?.join(', ') || vendor.תחום_השירות || 'לא צוין'}</div>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
            
            content.innerHTML = html;
        }
        
        function displayCandidates(candidates) {
            const content = document.getElementById('mainContent');
            const candidatesList = Array.isArray(candidates) ? candidates : candidates.candidates || [];
            
            const html = `
                <h2>👤 מועמדי המערכת (${candidatesList.length})</h2>
                ${candidatesList.map(candidate => `
                    <div class="data-card">
                        <div class="card-header">
                            <div class="card-title">${candidate.personal_info?.full_name || candidate.שם_מלא || 'לא צוין'}</div>
                            <div class="card-badge ${candidate.status === 'ACTIVE' ? '' : 'inactive'}">
                                ${candidate.status === 'ACTIVE' ? 'פעיל' : 'לא פעיל'}
                            </div>
                        </div>
                        <div class="data-grid">
                            <div class="data-item">
                                <div class="data-label">📧 אימייל</div>
                                <div class="data-value">${candidate.personal_info?.email || candidate.אימייל || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📞 טלפון</div>
                                <div class="data-value">${candidate.personal_info?.phone || candidate.טלפון || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💼 משרה מבוקשת</div>
                                <div class="data-value">${candidate.professional_info?.desired_position || candidate.משרה || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🎯 שלב נוכחי</div>
                                <div class="data-value">${candidate.recruitment_process?.current_stage || candidate.שלב_בתהליך || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💵 שכר מבוקש</div>
                                <div class="data-value">₪${candidate.professional_info?.desired_salary?.toLocaleString() || candidate.שכר_מבוקש?.toLocaleString() || '0'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">🏢 עיר</div>
                                <div class="data-value">${candidate.personal_info?.city || candidate.עיר || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">💻 טכנולוגיות</div>
                                <div class="data-value">${candidate.professional_info?.programming_languages?.join(', ') || candidate.שפות_תכנות?.join(', ') || 'לא צוין'}</div>
                            </div>
                            <div class="data-item">
                                <div class="data-label">📅 תאריך יצירה</div>
                                <div class="data-value">${candidate.created_date || candidate.תאריך_יצירה || 'לא ידוע'}</div>
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
            
            content.innerHTML = html;
        }
        
        function showSuccess(message) {
            const content = document.getElementById('mainContent');
            const successDiv = document.createElement('div');
            successDiv.className = 'card-badge';
            successDiv.style.cssText = 'position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 1000;';
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            setTimeout(() => successDiv.remove(), 3000);
        }
        
        function showError(message) {
            const content = document.getElementById('mainContent');
            content.innerHTML = `<div class="error">${message}</div>`;
        }
        
        // Drag and drop functionality
        document.addEventListener('DOMContentLoaded', function() {
            const fileUpload = document.querySelector('.file-upload');
            
            fileUpload.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.style.background = '#dee2e6';
            });
            
            fileUpload.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.style.background = '#e9ecef';
            });
            
            fileUpload.addEventListener('drop', function(e) {
                e.preventDefault();
                this.style.background = '#e9ecef';
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    const file = files[0];
                    if (file.type === 'application/json') {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            try {
                                const data = JSON.parse(e.target.result);
                                displayData(data);
                                showSuccess('✅ הקובץ נטען בהצלחה!');
                            } catch (error) {
                                showError('❌ שגיאה בטעינת הקובץ: ' + error.message);
                            }
                        };
                        reader.readAsText(file, 'UTF-8');
                    } else {
                        showError('⚠️ אנא גרור קובץ JSON בלבד');
                    }
                }
            });
        });
    </script>
</body>
</html>
